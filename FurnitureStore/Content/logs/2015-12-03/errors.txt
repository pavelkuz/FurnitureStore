2015-12-03 01:51:31.8134|ERROR|FurnitureStore.Models.UserRepository|System.InvalidCastException: Не удалось привести тип объекта "NHibernate.Impl.CriteriaImpl" к типу "FurnitureStore.Models.User".
   в FurnitureStore.Models.UserRepository.Login(String login, String password) в c:\Users\Pavel\Documents\Visual Studio 2013\Projects\FurnitureStore\FurnitureStore\Models\UserRepository.cs:строка 65
2015-12-03 01:55:30.3001|ERROR|FurnitureStore.Models.UserRepository|System.InvalidCastException: Не удалось привести тип объекта "NHibernate.Impl.CriteriaImpl" к типу "System.Collections.Generic.List`1[FurnitureStore.Models.User]".
   в FurnitureStore.Models.UserRepository.Login(String login, String password) в c:\Users\Pavel\Documents\Visual Studio 2013\Projects\FurnitureStore\FurnitureStore\Models\UserRepository.cs:строка 65
2015-12-03 02:02:28.3700|ERROR|FurnitureStore.Models.UserRepository|System.InvalidCastException: Не удалось привести тип объекта "NHibernate.Impl.CriteriaImpl" к типу "System.Collections.Generic.List`1[FurnitureStore.Models.User]".
   в FurnitureStore.Models.UserRepository.Login(String login, String password) в c:\Users\Pavel\Documents\Visual Studio 2013\Projects\FurnitureStore\FurnitureStore\Models\UserRepository.cs:строка 65
2015-12-03 02:03:23.9792|ERROR|FurnitureStore.Models.UserRepository|System.InvalidCastException: Не удалось привести тип объекта "NHibernate.Impl.CriteriaImpl" к типу "FurnitureStore.Models.User".
   в FurnitureStore.Models.UserRepository.Login(String login, String password) в c:\Users\Pavel\Documents\Visual Studio 2013\Projects\FurnitureStore\FurnitureStore\Models\UserRepository.cs:строка 65
2015-12-03 02:05:05.4150|ERROR|FurnitureStore.Models.UserRepository|System.NullReferenceException: Ссылка на объект не указывает на экземпляр объекта.
   в NHibernate.Loader.Criteria.CriteriaQueryTranslator.GetEntityName(ICriteria subcriteria, String propertyName)
   в NHibernate.Loader.Criteria.CriteriaQueryTranslator.GetColumns(ICriteria subcriteria, String propertyName)
   в NHibernate.Loader.Criteria.CriteriaQueryTranslator.GetColumnsUsingProjection(ICriteria subcriteria, String propertyName)
   в NHibernate.Criterion.CriterionUtil.GetColumnNamesUsingPropertyName(ICriteriaQuery criteriaQuery, ICriteria criteria, String propertyName, Object value, ICriterion critertion)
   в NHibernate.Criterion.CriterionUtil.GetColumnNamesForSimpleExpression(String propertyName, IProjection projection, ICriteriaQuery criteriaQuery, ICriteria criteria, IDictionary`2 enabledFilters, ICriterion criterion, Object value)
   в NHibernate.Criterion.SimpleExpression.ToSqlString(ICriteria criteria, ICriteriaQuery criteriaQuery, IDictionary`2 enabledFilters)
   в NHibernate.Loader.Criteria.CriteriaQueryTranslator.GetWhereCondition(IDictionary`2 enabledFilters)
   в NHibernate.Loader.Criteria.CriteriaJoinWalker..ctor(IOuterJoinLoadable persister, CriteriaQueryTranslator translator, ISessionFactoryImplementor factory, ICriteria criteria, String rootEntityName, IDictionary`2 enabledFilters)
   в NHibernate.Loader.Criteria.CriteriaLoader..ctor(IOuterJoinLoadable persister, ISessionFactoryImplementor factory, CriteriaImpl rootCriteria, String rootEntityName, IDictionary`2 enabledFilters)
   в NHibernate.Impl.SessionImpl.List(CriteriaImpl criteria, IList results)
   в NHibernate.Impl.CriteriaImpl.List(IList results)
   в NHibernate.Impl.CriteriaImpl.List[T]()
   в FurnitureStore.Models.UserRepository.Login(String login, String password) в c:\Users\Pavel\Documents\Visual Studio 2013\Projects\FurnitureStore\FurnitureStore\Models\UserRepository.cs:строка 65
2015-12-03 02:08:02.9601|ERROR|FurnitureStore.Models.UserRepository|NHibernate.MappingException: Could not compile the mapping document: c:\users\pavel\documents\visual studio 2013\Projects\FurnitureStore\FurnitureStore\Models\NHibernate\Mappings\User.hbm.xml ---> NHibernate.DuplicateMappingException: Duplicate class/entity mapping FurnitureStore.Models.Role
   в NHibernate.Cfg.Mappings.AddClass(PersistentClass persistentClass)
   в NHibernate.Cfg.XmlHbmBinding.RootClassBinder.Bind(HbmClass classSchema, IDictionary`2 inheritedMetas)
   в NHibernate.Cfg.XmlHbmBinding.MappingRootBinder.AddRootClasses(HbmClass rootClass, IDictionary`2 inheritedMetas)
   в NHibernate.Cfg.XmlHbmBinding.MappingRootBinder.AddEntitiesMappings(HbmMapping mappingSchema, IDictionary`2 inheritedMetas)
   в NHibernate.Cfg.XmlHbmBinding.MappingRootBinder.Bind(HbmMapping mappingSchema)
   в NHibernate.Cfg.Configuration.AddDeserializedMapping(HbmMapping mappingDocument, String documentFileName)
   --- Конец трассировки внутреннего стека исключений ---
   в NHibernate.Cfg.Configuration.LogAndThrow(Exception exception)
   в NHibernate.Cfg.Configuration.AddDeserializedMapping(HbmMapping mappingDocument, String documentFileName)
   в NHibernate.Cfg.Configuration.AddValidatedDocument(NamedXmlDocument doc)
   в NHibernate.Cfg.Configuration.ProcessMappingsQueue()
   в NHibernate.Cfg.Configuration.AddDocumentThroughQueue(NamedXmlDocument document)
   в NHibernate.Cfg.Configuration.AddXmlReader(XmlReader hbmReader, String name)
   в NHibernate.Cfg.Configuration.AddXmlFile(String xmlFile)
   в NHibernate.Cfg.Configuration.AddFile(String xmlFile)
   в NHibernate.Cfg.Configuration.AddFile(FileInfo xmlFile)
   в NHibernate.Cfg.Configuration.AddDirectory(DirectoryInfo dir)
   в FurnitureStore.Models.Utils.NHibernateHelper.get_SessionFactory() в c:\Users\Pavel\Documents\Visual Studio 2013\Projects\FurnitureStore\FurnitureStore\Models\Utils\NHibernateHelper.cs:строка 24
   в FurnitureStore.Models.Utils.NHibernateHelper.OpenSession() в c:\Users\Pavel\Documents\Visual Studio 2013\Projects\FurnitureStore\FurnitureStore\Models\Utils\NHibernateHelper.cs:строка 33
   в FurnitureStore.Models.UserRepository.Login(String login, String password) в c:\Users\Pavel\Documents\Visual Studio 2013\Projects\FurnitureStore\FurnitureStore\Models\UserRepository.cs:строка 63
2015-12-03 09:56:09.8862|ERROR|FurnitureStore.Models.UserRepository|NHibernate.Exceptions.GenericADOException: could not execute batch command.[SQL: SQL not available] ---> System.Data.SqlClient.SqlException: Cannot insert the value NULL into column 'FirstName', table 'FurnitureStore.dbo.Users'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   в System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   в System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   в System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   в System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   в System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   в System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   в System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite)
   в System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean asyncWrite)
   в System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   в System.Data.SqlClient.SqlCommand.ExecuteBatchRPCCommand()
   в System.Data.SqlClient.SqlCommandSet.ExecuteNonQuery()
   в NHibernate.AdoNet.SqlClientSqlCommandSet.ExecuteNonQuery()
   в NHibernate.AdoNet.SqlClientBatchingBatcher.DoExecuteBatch(IDbCommand ps)
   --- Конец трассировки внутреннего стека исключений ---
   в NHibernate.AdoNet.SqlClientBatchingBatcher.DoExecuteBatch(IDbCommand ps)
   в NHibernate.AdoNet.AbstractBatcher.ExecuteBatchWithTiming(IDbCommand ps)
   в NHibernate.AdoNet.AbstractBatcher.ExecuteBatch()
   в NHibernate.Engine.ActionQueue.ExecuteActions(IList list)
   в NHibernate.Engine.ActionQueue.ExecuteActions()
   в NHibernate.Event.Default.AbstractFlushingEventListener.PerformExecutions(IEventSource session)
   в NHibernate.Event.Default.DefaultFlushEventListener.OnFlush(FlushEvent event)
   в NHibernate.Impl.SessionImpl.Flush()
   в NHibernate.Transaction.AdoTransaction.Commit()
   в FurnitureStore.Models.UserRepository.Save(User User) в c:\Users\Pavel\Documents\Visual Studio 2013\Projects\FurnitureStore\FurnitureStore\Models\UserRepository.cs:строка 29
2015-12-03 09:58:25.9300|ERROR|FurnitureStore.Models.UserRepository|NHibernate.Exceptions.GenericADOException: could not execute batch command.[SQL: SQL not available] ---> System.Data.SqlClient.SqlException: Cannot insert the value NULL into column 'RoleId', table 'FurnitureStore.dbo.Users'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   в System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   в System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   в System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   в System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   в System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   в System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   в System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite)
   в System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean asyncWrite)
   в System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   в System.Data.SqlClient.SqlCommand.ExecuteBatchRPCCommand()
   в System.Data.SqlClient.SqlCommandSet.ExecuteNonQuery()
   в NHibernate.AdoNet.SqlClientSqlCommandSet.ExecuteNonQuery()
   в NHibernate.AdoNet.SqlClientBatchingBatcher.DoExecuteBatch(IDbCommand ps)
   --- Конец трассировки внутреннего стека исключений ---
   в NHibernate.AdoNet.SqlClientBatchingBatcher.DoExecuteBatch(IDbCommand ps)
   в NHibernate.AdoNet.AbstractBatcher.ExecuteBatchWithTiming(IDbCommand ps)
   в NHibernate.AdoNet.AbstractBatcher.ExecuteBatch()
   в NHibernate.Engine.ActionQueue.ExecuteActions(IList list)
   в NHibernate.Engine.ActionQueue.ExecuteActions()
   в NHibernate.Event.Default.AbstractFlushingEventListener.PerformExecutions(IEventSource session)
   в NHibernate.Event.Default.DefaultFlushEventListener.OnFlush(FlushEvent event)
   в NHibernate.Impl.SessionImpl.Flush()
   в NHibernate.Transaction.AdoTransaction.Commit()
   в FurnitureStore.Models.UserRepository.Save(User User) в c:\Users\Pavel\Documents\Visual Studio 2013\Projects\FurnitureStore\FurnitureStore\Models\UserRepository.cs:строка 29
2015-12-03 10:00:53.1094|ERROR|FurnitureStore.Models.UserRepository|NHibernate.Exceptions.GenericADOException: could not execute batch command.[SQL: SQL not available] ---> System.Data.SqlClient.SqlException: Cannot insert the value NULL into column 'RoleId', table 'FurnitureStore.dbo.Users'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   в System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   в System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   в System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   в System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   в System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   в System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   в System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite)
   в System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean asyncWrite)
   в System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   в System.Data.SqlClient.SqlCommand.ExecuteBatchRPCCommand()
   в System.Data.SqlClient.SqlCommandSet.ExecuteNonQuery()
   в NHibernate.AdoNet.SqlClientSqlCommandSet.ExecuteNonQuery()
   в NHibernate.AdoNet.SqlClientBatchingBatcher.DoExecuteBatch(IDbCommand ps)
   --- Конец трассировки внутреннего стека исключений ---
   в NHibernate.AdoNet.SqlClientBatchingBatcher.DoExecuteBatch(IDbCommand ps)
   в NHibernate.AdoNet.AbstractBatcher.ExecuteBatchWithTiming(IDbCommand ps)
   в NHibernate.AdoNet.AbstractBatcher.ExecuteBatch()
   в NHibernate.Engine.ActionQueue.ExecuteActions(IList list)
   в NHibernate.Engine.ActionQueue.ExecuteActions()
   в NHibernate.Event.Default.AbstractFlushingEventListener.PerformExecutions(IEventSource session)
   в NHibernate.Event.Default.DefaultFlushEventListener.OnFlush(FlushEvent event)
   в NHibernate.Impl.SessionImpl.Flush()
   в NHibernate.Transaction.AdoTransaction.Commit()
   в FurnitureStore.Models.UserRepository.Save(User User) в c:\Users\Pavel\Documents\Visual Studio 2013\Projects\FurnitureStore\FurnitureStore\Models\UserRepository.cs:строка 29
2015-12-03 10:05:37.7797|ERROR|FurnitureStore.Models.UserRepository|NHibernate.Exceptions.GenericADOException: could not execute batch command.[SQL: SQL not available] ---> System.Data.SqlClient.SqlException: Cannot insert the value NULL into column 'RoleId', table 'FurnitureStore.dbo.Users'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   в System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   в System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   в System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   в System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   в System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   в System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   в System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite)
   в System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean asyncWrite)
   в System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   в System.Data.SqlClient.SqlCommand.ExecuteBatchRPCCommand()
   в System.Data.SqlClient.SqlCommandSet.ExecuteNonQuery()
   в NHibernate.AdoNet.SqlClientSqlCommandSet.ExecuteNonQuery()
   в NHibernate.AdoNet.SqlClientBatchingBatcher.DoExecuteBatch(IDbCommand ps)
   --- Конец трассировки внутреннего стека исключений ---
   в NHibernate.AdoNet.SqlClientBatchingBatcher.DoExecuteBatch(IDbCommand ps)
   в NHibernate.AdoNet.AbstractBatcher.ExecuteBatchWithTiming(IDbCommand ps)
   в NHibernate.AdoNet.AbstractBatcher.ExecuteBatch()
   в NHibernate.Engine.ActionQueue.ExecuteActions(IList list)
   в NHibernate.Engine.ActionQueue.ExecuteActions()
   в NHibernate.Event.Default.AbstractFlushingEventListener.PerformExecutions(IEventSource session)
   в NHibernate.Event.Default.DefaultFlushEventListener.OnFlush(FlushEvent event)
   в NHibernate.Impl.SessionImpl.Flush()
   в NHibernate.Transaction.AdoTransaction.Commit()
   в FurnitureStore.Models.UserRepository.Save(User User) в c:\Users\Pavel\Documents\Visual Studio 2013\Projects\FurnitureStore\FurnitureStore\Models\UserRepository.cs:строка 29
2015-12-03 10:07:50.4063|ERROR|FurnitureStore.Models.UserRepository|NHibernate.Exceptions.GenericADOException: could not execute batch command.[SQL: SQL not available] ---> System.Data.SqlClient.SqlException: Cannot insert the value NULL into column 'RoleId', table 'FurnitureStore.dbo.Users'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   в System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   в System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   в System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   в System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   в System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   в System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   в System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite)
   в System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean asyncWrite)
   в System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   в System.Data.SqlClient.SqlCommand.ExecuteBatchRPCCommand()
   в System.Data.SqlClient.SqlCommandSet.ExecuteNonQuery()
   в NHibernate.AdoNet.SqlClientSqlCommandSet.ExecuteNonQuery()
   в NHibernate.AdoNet.SqlClientBatchingBatcher.DoExecuteBatch(IDbCommand ps)
   --- Конец трассировки внутреннего стека исключений ---
   в NHibernate.AdoNet.SqlClientBatchingBatcher.DoExecuteBatch(IDbCommand ps)
   в NHibernate.AdoNet.AbstractBatcher.ExecuteBatchWithTiming(IDbCommand ps)
   в NHibernate.AdoNet.AbstractBatcher.ExecuteBatch()
   в NHibernate.Engine.ActionQueue.ExecuteActions(IList list)
   в NHibernate.Engine.ActionQueue.ExecuteActions()
   в NHibernate.Event.Default.AbstractFlushingEventListener.PerformExecutions(IEventSource session)
   в NHibernate.Event.Default.DefaultFlushEventListener.OnFlush(FlushEvent event)
   в NHibernate.Impl.SessionImpl.Flush()
   в NHibernate.Transaction.AdoTransaction.Commit()
   в FurnitureStore.Models.UserRepository.Save(User User) в c:\Users\Pavel\Documents\Visual Studio 2013\Projects\FurnitureStore\FurnitureStore\Models\UserRepository.cs:строка 29
2015-12-03 10:11:09.5977|ERROR|FurnitureStore.Models.UserRepository|NHibernate.Exceptions.GenericADOException: could not execute batch command.[SQL: SQL not available] ---> System.Data.SqlClient.SqlException: Cannot insert the value NULL into column 'RoleId', table 'FurnitureStore.dbo.Users'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   в System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   в System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   в System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   в System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   в System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   в System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   в System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite)
   в System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean asyncWrite)
   в System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   в System.Data.SqlClient.SqlCommand.ExecuteBatchRPCCommand()
   в System.Data.SqlClient.SqlCommandSet.ExecuteNonQuery()
   в NHibernate.AdoNet.SqlClientSqlCommandSet.ExecuteNonQuery()
   в NHibernate.AdoNet.SqlClientBatchingBatcher.DoExecuteBatch(IDbCommand ps)
   --- Конец трассировки внутреннего стека исключений ---
   в NHibernate.AdoNet.SqlClientBatchingBatcher.DoExecuteBatch(IDbCommand ps)
   в NHibernate.AdoNet.AbstractBatcher.ExecuteBatchWithTiming(IDbCommand ps)
   в NHibernate.AdoNet.AbstractBatcher.ExecuteBatch()
   в NHibernate.Engine.ActionQueue.ExecuteActions(IList list)
   в NHibernate.Engine.ActionQueue.ExecuteActions()
   в NHibernate.Event.Default.AbstractFlushingEventListener.PerformExecutions(IEventSource session)
   в NHibernate.Event.Default.DefaultFlushEventListener.OnFlush(FlushEvent event)
   в NHibernate.Impl.SessionImpl.Flush()
   в NHibernate.Transaction.AdoTransaction.Commit()
   в FurnitureStore.Models.UserRepository.Save(User User) в c:\Users\Pavel\Documents\Visual Studio 2013\Projects\FurnitureStore\FurnitureStore\Models\UserRepository.cs:строка 29
2015-12-03 12:54:16.9763|ERROR|FurnitureStore.Models.CartRepository|NHibernate.Exceptions.GenericADOException: Unable to perform find[SQL: SQL not available] ---> System.ArgumentException: Типом значения "FurnitureStore.Models.Cart" не является "FurnitureStore.Models.User", поэтому оно не может быть использовано в данной базовой коллекции.
Имя параметра: value
   в System.ThrowHelper.ThrowWrongValueTypeArgumentException(Object value, Type targetType)
   в System.Collections.Generic.List`1.System.Collections.IList.Add(Object item)
   в NHibernate.Util.ArrayHelper.AddAll(IList to, IList from)
   в NHibernate.Impl.SessionImpl.List(CriteriaImpl criteria, IList results)
   --- Конец трассировки внутреннего стека исключений ---
   в NHibernate.Impl.SessionImpl.List(CriteriaImpl criteria, IList results)
   в NHibernate.Impl.CriteriaImpl.List(IList results)
   в NHibernate.Impl.CriteriaImpl.List[T]()
   в FurnitureStore.Models.CartRepository.GetUnpayedCartByUser(User user) в c:\Users\Pavel\Documents\Visual Studio 2013\Projects\FurnitureStore\FurnitureStore\Models\CartRepository.cs:строка 51
2015-12-03 13:06:48.2133|ERROR|FurnitureStore.Models.CartRepository|System.InvalidCastException: Не удалось привести тип объекта "System.Collections.Generic.List`1[FurnitureStore.Models.User]" к типу "System.Collections.Generic.List`1[FurnitureStore.Models.Cart]".
   в FurnitureStore.Models.CartRepository.GetUnpayedCartByUser(User user) в c:\Users\Pavel\Documents\Visual Studio 2013\Projects\FurnitureStore\FurnitureStore\Models\CartRepository.cs:строка 51
2015-12-03 13:40:41.6896|ERROR|FurnitureStore.Models.GoodsRepository|System.InvalidCastException: Не удалось привести тип объекта "NHibernate.Criterion.QueryOver`2[FurnitureStore.Models.Cart,FurnitureStore.Models.User]" к типу "NHibernate.IQueryOver`2[FurnitureStore.Models.Cart,FurnitureStore.Models.Goods]".
   в FurnitureStore.Models.GoodsRepository.GetAllFurnituresInCart(User user) в c:\Users\Pavel\Documents\Visual Studio 2013\Projects\FurnitureStore\FurnitureStore\Models\GoodsRepository.cs:строка 107
2015-12-03 14:25:25.2811|ERROR|FurnitureStore.Models.GoodsRepository|NHibernate.QueryException: could not resolve property: User.Orders of: FurnitureStore.Models.Cart
   в NHibernate.Persister.Entity.AbstractPropertyMapping.ToType(String propertyName)
   в NHibernate.Persister.Entity.AbstractEntityPersister.ToType(String propertyName)
   в NHibernate.Loader.Criteria.EntityCriteriaInfoProvider.GetType(String relativePath)
   в NHibernate.Loader.Criteria.CriteriaQueryTranslator.GetPathInfo(String path)
   в NHibernate.Loader.Criteria.CriteriaQueryTranslator.CreateCriteriaEntityNameMap()
   в NHibernate.Loader.Criteria.CriteriaQueryTranslator..ctor(ISessionFactoryImplementor factory, CriteriaImpl criteria, String rootEntityName, String rootSQLAlias)
   в NHibernate.Loader.Criteria.CriteriaLoader..ctor(IOuterJoinLoadable persister, ISessionFactoryImplementor factory, CriteriaImpl rootCriteria, String rootEntityName, IDictionary`2 enabledFilters)
   в NHibernate.Impl.SessionImpl.List(CriteriaImpl criteria, IList results)
   в NHibernate.Impl.CriteriaImpl.List(IList results)
   в NHibernate.Impl.CriteriaImpl.List[T]()
   в NHibernate.Impl.CriteriaImpl.Subcriteria.List[T]()
   в FurnitureStore.Models.GoodsRepository.GetAllFurnituresInCart(User user) в c:\Users\Pavel\Documents\Visual Studio 2013\Projects\FurnitureStore\FurnitureStore\Models\GoodsRepository.cs:строка 116
2015-12-03 14:26:41.0074|ERROR|FurnitureStore.Models.GoodsRepository|NHibernate.QueryException: could not resolve property: User.Orders of: FurnitureStore.Models.Cart
   в NHibernate.Persister.Entity.AbstractPropertyMapping.ToType(String propertyName)
   в NHibernate.Persister.Entity.AbstractEntityPersister.ToType(String propertyName)
   в NHibernate.Loader.Criteria.EntityCriteriaInfoProvider.GetType(String relativePath)
   в NHibernate.Loader.Criteria.CriteriaQueryTranslator.GetPathInfo(String path)
   в NHibernate.Loader.Criteria.CriteriaQueryTranslator.CreateCriteriaEntityNameMap()
   в NHibernate.Loader.Criteria.CriteriaQueryTranslator..ctor(ISessionFactoryImplementor factory, CriteriaImpl criteria, String rootEntityName, String rootSQLAlias)
   в NHibernate.Loader.Criteria.CriteriaLoader..ctor(IOuterJoinLoadable persister, ISessionFactoryImplementor factory, CriteriaImpl rootCriteria, String rootEntityName, IDictionary`2 enabledFilters)
   в NHibernate.Impl.SessionImpl.List(CriteriaImpl criteria, IList results)
   в NHibernate.Impl.CriteriaImpl.List(IList results)
   в NHibernate.Impl.CriteriaImpl.List[T]()
   в NHibernate.Impl.CriteriaImpl.Subcriteria.List[T]()
   в FurnitureStore.Models.GoodsRepository.GetAllFurnituresInCart(User user) в c:\Users\Pavel\Documents\Visual Studio 2013\Projects\FurnitureStore\FurnitureStore\Models\GoodsRepository.cs:строка 116
2015-12-03 14:28:03.0511|ERROR|FurnitureStore.Models.GoodsRepository|NHibernate.QueryException: could not resolve property: User of: FurnitureStore.Models.Goods
   в NHibernate.Persister.Entity.AbstractPropertyMapping.ToType(String propertyName)
   в NHibernate.Persister.Entity.AbstractEntityPersister.ToType(String propertyName)
   в NHibernate.Loader.Criteria.EntityCriteriaInfoProvider.GetType(String relativePath)
   в NHibernate.Loader.Criteria.CriteriaQueryTranslator.GetPathInfo(String path)
   в NHibernate.Loader.Criteria.CriteriaQueryTranslator.CreateCriteriaEntityNameMap()
   в NHibernate.Loader.Criteria.CriteriaQueryTranslator..ctor(ISessionFactoryImplementor factory, CriteriaImpl criteria, String rootEntityName, String rootSQLAlias)
   в NHibernate.Loader.Criteria.CriteriaLoader..ctor(IOuterJoinLoadable persister, ISessionFactoryImplementor factory, CriteriaImpl rootCriteria, String rootEntityName, IDictionary`2 enabledFilters)
   в NHibernate.Impl.SessionImpl.List(CriteriaImpl criteria, IList results)
   в NHibernate.Impl.CriteriaImpl.List(IList results)
   в NHibernate.Impl.CriteriaImpl.List[T]()
   в NHibernate.Impl.CriteriaImpl.Subcriteria.List[T]()
   в FurnitureStore.Models.GoodsRepository.GetAllFurnituresInCart(User user) в c:\Users\Pavel\Documents\Visual Studio 2013\Projects\FurnitureStore\FurnitureStore\Models\GoodsRepository.cs:строка 116
2015-12-03 14:29:26.2638|ERROR|FurnitureStore.Models.GoodsRepository|NHibernate.QueryException: could not resolve property: User.Orders of: FurnitureStore.Models.Cart
   в NHibernate.Persister.Entity.AbstractPropertyMapping.ToType(String propertyName)
   в NHibernate.Persister.Entity.AbstractEntityPersister.ToType(String propertyName)
   в NHibernate.Loader.Criteria.EntityCriteriaInfoProvider.GetType(String relativePath)
   в NHibernate.Loader.Criteria.CriteriaQueryTranslator.GetPathInfo(String path)
   в NHibernate.Loader.Criteria.CriteriaQueryTranslator.CreateCriteriaEntityNameMap()
   в NHibernate.Loader.Criteria.CriteriaQueryTranslator..ctor(ISessionFactoryImplementor factory, CriteriaImpl criteria, String rootEntityName, String rootSQLAlias)
   в NHibernate.Loader.Criteria.CriteriaLoader..ctor(IOuterJoinLoadable persister, ISessionFactoryImplementor factory, CriteriaImpl rootCriteria, String rootEntityName, IDictionary`2 enabledFilters)
   в NHibernate.Impl.SessionImpl.List(CriteriaImpl criteria, IList results)
   в NHibernate.Impl.CriteriaImpl.List(IList results)
   в NHibernate.Impl.CriteriaImpl.List[T]()
   в NHibernate.Impl.CriteriaImpl.Subcriteria.List[T]()
   в FurnitureStore.Models.GoodsRepository.GetAllFurnituresInCart(User user) в c:\Users\Pavel\Documents\Visual Studio 2013\Projects\FurnitureStore\FurnitureStore\Models\GoodsRepository.cs:строка 116
